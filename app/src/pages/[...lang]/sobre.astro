---
import Layout from '@layouts/Layout.astro';
import HeroSection from '@components/HeroSection.astro';
import Section from '@components/Section.astro';
import SectionText from '@components/SectionText.astro';
import SectionImage from '@components/SectionImage.astro';
import MilestonesTimeline from '@components/about/MilestonesTimeline.astro';
import MissionPillars from '@components/about/MissionPillars.astro';
import HierarchyPyramid from '@components/about/HierarchyPyramid.astro';
import CallToActionCards from '@components/about/CallToActionCards.astro';
import { useTranslations, type Language, defaultLang } from '@i18n/index';
import { Image } from 'astro:assets';

import heroImage from '@assets/photos/grupo-vinheta.jpg';
import groupPhoto from '@assets/photos/grupo-principal.jpg';
import placaPhoto from '@assets/photos/placa-25-anos.jpg';

export function getStaticPaths() {
  return [{ params: { lang: undefined } }, { params: { lang: 'en' } }];
}

const { lang } = Astro.params;
const currentLang: Language = (lang as Language) || defaultLang;
const t = useTranslations(currentLang);

const milestones = [
  { year: '1998', text: t('about.milestones.1998') },
  { year: '1999', text: t('about.milestones.1999') },
  { year: '2003', text: t('about.milestones.2003') },
  { year: '2004', text: t('about.milestones.2004') },
  { year: '2008', text: t('about.milestones.2008') },
  { year: '2023', text: t('about.milestones.2023') },
];
---

<Layout title={`${t('about.title')} | TunadÃ£o 1998`} description={t('about.description')}>
  <!-- 1. Hero with background image -->
  <HeroSection
    title={t('about.title')}
    subtitle={t('about.subtitle')}
    backgroundImage={heroImage}
    backgroundAlt={t('about.hero.alt')}
    subtitleColor="gold"
    height="60vh"
  />

  <!-- 2. History Section -->
  <!-- Row 1: text left, image right (default position) -->
  <Section imagePosition="right" showGoldFrame
    divider={t('about.sections.history.dividerLabel')}
    title={t('about.history')}>
    <SectionText>
      <p>{t('about.historyText.p1')}</p>
      <p>{t('about.historyText.p2')}</p>
    </SectionText>
    <SectionImage>
      <Image
        src={groupPhoto}
        alt={t('about.sections.history.image1Alt')}
        widths={[400, 600, 800]}
        sizes="(max-width: 1024px) 100vw, 50vw"
        style="aspect-ratio: 4/3; object-fit: cover;"
      />
    </SectionImage>
  </Section>

  <!-- Row 2: image left, text right -->
  <Section imagePosition="left" showGoldFrame background="alt">
    <SectionText>
      <p>{t('about.historyText.p3')}</p>
      <p>{t('about.historyText.p4')}</p>
    </SectionText>
    <SectionImage>
      <Image
        src={placaPhoto}
        alt={t('about.sections.history.image2Alt')}
        widths={[400, 600, 800]}
        sizes="(max-width: 1024px) 100vw, 50vw"
        style="aspect-ratio: 4/3; object-fit: cover;"
      />
    </SectionImage>
  </Section>

  <!-- 3. Milestones Timeline -->
  <MilestonesTimeline
    title={t('about.milestones.title')}
    dividerLabel={t('about.sections.milestones.dividerLabel')}
    milestones={milestones}
  />

  <!-- 4. Mission Pillars -->
  <MissionPillars
    title={t('about.mission')}
    dividerLabel={t('about.sections.mission.dividerLabel')}
    lang={currentLang}
  />

  <!-- 5. Hierarchy Pyramid -->
  <HierarchyPyramid
    title={t('about.hierarchy.title')}
    intro={t('about.hierarchy.intro')}
    dividerLabel={t('about.sections.hierarchy.dividerLabel')}
    lang={currentLang}
  />

  <!-- 6. Call to Action Cards -->
  <CallToActionCards
    lang={currentLang}
    title={t('about.sections.cta.title')}
    description={t('about.sections.cta.description')}
    dividerLabel={t('about.sections.cta.dividerLabel')}
    palmaresText={t('about.sections.cta.palmares')}
    citadaoText={t('about.sections.cta.citadao')}
  />
</Layout>
