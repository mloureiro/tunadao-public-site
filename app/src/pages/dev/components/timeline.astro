---
import DevLayout from '@layouts/DevLayout.astro';
import YearNavigation from '@components/YearNavigation.astro';
import VerticalTimeline from '@components/VerticalTimeline.astro';

// Sample years for demo
const sampleYears = [2024, 2023, 2022, 2021, 2020, 2019, 2018, 2017, 2016, 2015];
---

<DevLayout title="Timeline" currentPage="timeline">
  <section class="intro-section">
    <h2>Timeline Components</h2>
    <p>Year navigation components for the Palmarés and Cidadão pages.</p>

    <div class="feature-checklist">
      <h3>Implemented Features</h3>
      <ul>
        <li>
          <span class="status done"></span>
          Vertical timeline layout (VerticalTimeline.astro)
        </li>
        <li>
          <span class="status done"></span>
          Scroll-based year tracking (Intersection Observer)
        </li>
        <li>
          <span class="status done"></span>
          Mobile-responsive design (floating indicator)
        </li>
        <li>
          <span class="status done"></span>
          Accessibility (keyboard navigation, ARIA)
        </li>
        <li>
          <span class="status done"></span>
          Current vs new comparison (below)
        </li>
      </ul>
    </div>
  </section>

  <!-- Current: Horizontal YearNavigation -->
  <section id="current" class="component-section">
    <h2>Current: YearNavigation (Horizontal)</h2>
    <p class="component-path">@components/YearNavigation.astro</p>

    <div class="component-group">
      <h3>Preview</h3>
      <div class="preview-box preview-box--horizontal">
        <YearNavigation
          years={sampleYears}
          idPrefix="current-year"
          ariaLabel="Jump to year (current design)"
        />
      </div>
    </div>

    <div class="component-group">
      <h3>Features</h3>
      <ul class="feature-list">
        <li>Horizontal pill layout</li>
        <li>Becomes sticky on scroll</li>
        <li>Floating year indicator (bottom-right)</li>
        <li>Smooth scroll to sections</li>
      </ul>
    </div>
  </section>

  <!-- New: Vertical Timeline -->
  <section id="new" class="component-section">
    <h2>New: VerticalTimeline (Vertical)</h2>
    <p class="component-path">@components/VerticalTimeline.astro</p>

    <div class="component-group">
      <h3>Features</h3>
      <ul class="feature-list">
        <li><strong>Desktop (&gt;1200px):</strong> Fixed vertical sidebar on left</li>
        <li><strong>Mobile/Tablet:</strong> Floating year indicator with dropdown</li>
        <li>Year dots highlight on scroll</li>
        <li>Labels appear on hover/focus</li>
        <li>Keyboard navigation (arrows, home/end)</li>
        <li>ARIA labels for screen readers</li>
      </ul>
    </div>

    <div class="component-group">
      <h3>Live Demo</h3>
      <p class="component-note">
        Scroll down to see the vertical timeline appear on the left (desktop)
        or the floating indicator on the bottom-right (mobile/tablet).
      </p>
    </div>
  </section>

  <!-- Demo: Sample year sections for scroll testing -->
  <section class="demo-section">
    <h2>Scroll Demo</h2>
    <p>Scroll through these sections to see the vertical timeline in action.</p>

    <VerticalTimeline
      years={sampleYears}
      idPrefix="demo-year"
      ariaLabel="Jump to year (new design)"
    />

    {sampleYears.map((year) => (
      <div class="demo-year-section" id={`demo-year-${year}`}>
        <div class="demo-year-header">
          <h3 class="demo-year-title">{year}</h3>
          <span class="demo-year-badge">{Math.floor(Math.random() * 10) + 1} festivals</span>
        </div>
        <div class="demo-year-content">
          <p>This is sample content for {year}. Scroll to see the timeline update.</p>
          <div class="demo-placeholder-cards">
            {[1, 2, 3].map((i) => (
              <div class="demo-card">
                <div class="demo-card__poster"></div>
                <div class="demo-card__info">
                  <strong>Festival {i}</strong>
                  <span>Location {i}</span>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    ))}
  </section>

  <style>
    .intro-section {
      margin-bottom: var(--space-8);
    }

    .intro-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--space-2);
    }

    .intro-section p {
      color: var(--color-text-muted);
      margin-bottom: var(--space-4);
    }

    .feature-checklist {
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--space-4);
    }

    .feature-checklist h3 {
      font-size: var(--font-size-sm);
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-3);
    }

    .feature-checklist ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }

    .feature-checklist li {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-size: var(--font-size-sm);
    }

    .status {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      flex-shrink: 0;
    }

    .status.done {
      background-color: var(--color-success);
    }

    .status.pending {
      background-color: var(--color-warning-light);
      border: 2px solid var(--color-warning);
    }

    .component-section {
      margin-bottom: var(--space-12);
      scroll-margin-top: 120px;
    }

    .component-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--space-1);
      color: var(--color-text);
    }

    .component-path {
      font-family: monospace;
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      margin-bottom: var(--space-6);
    }

    .component-group {
      margin-bottom: var(--space-6);
      padding: var(--space-4);
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-border);
    }

    .component-group h3 {
      font-size: var(--font-size-sm);
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-4);
    }

    .preview-box {
      background-color: var(--color-background);
      border-radius: var(--radius-md);
      overflow: hidden;
    }

    .preview-box--horizontal {
      margin: calc(-1 * var(--space-4));
      margin-top: 0;
    }

    .feature-list {
      list-style: disc;
      padding-left: var(--space-6);
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
      font-size: var(--font-size-sm);
    }

    .component-note {
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      padding: var(--space-3);
      background-color: var(--color-primary-light);
      border-radius: var(--radius-md);
      margin: 0;
    }

    /* Demo Section */
    .demo-section {
      margin-bottom: var(--space-12);
    }

    .demo-section > h2 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--space-2);
    }

    .demo-section > p {
      color: var(--color-text-muted);
      margin-bottom: var(--space-8);
    }

    .demo-year-section {
      margin-bottom: var(--space-10);
      scroll-margin-top: 100px;
    }

    .demo-year-header {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-3);
      border-bottom: 3px solid var(--color-primary);
    }

    .demo-year-title {
      font-size: var(--font-size-3xl);
      font-weight: 700;
      color: var(--color-primary);
      margin: 0;
    }

    .demo-year-badge {
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      background-color: var(--color-surface);
      padding: var(--space-1) var(--space-3);
      border-radius: var(--radius-full);
      border: 1px solid var(--color-border);
    }

    .demo-year-content p {
      color: var(--color-text-muted);
      margin-bottom: var(--space-4);
    }

    .demo-placeholder-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: var(--space-4);
    }

    .demo-card {
      background-color: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .demo-card__poster {
      height: 120px;
      background: linear-gradient(135deg, var(--color-primary-light), var(--color-primary));
    }

    .demo-card__info {
      padding: var(--space-3);
      display: flex;
      flex-direction: column;
      gap: var(--space-1);
    }

    .demo-card__info strong {
      font-size: var(--font-size-sm);
    }

    .demo-card__info span {
      font-size: var(--font-size-xs);
      color: var(--color-text-muted);
    }
  </style>
</DevLayout>
