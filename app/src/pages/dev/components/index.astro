---
import DevLayout from '@layouts/DevLayout.astro';
import Button from '@components/Button.astro';
import Card from '@components/Card.astro';
import Award from '@components/Award.astro';
import TunaAvatar from '@components/tunas/Avatar.astro';
import TunaCard from '@components/tunas/Card.astro';
import type { FrontendTunaWithLogo } from '@lib/cms/types';

// All award types for demo
const allAwards = [
  { key: 'melhor-tuna', name: 'Melhor Tuna' },
  { key: 'segunda-melhor-tuna', name: '2a Melhor Tuna' },
  { key: 'terceira-melhor-tuna', name: '3a Melhor Tuna' },
  { key: 'tuna-mais-tuna', name: 'Tuna Mais Tuna' },
  { key: 'tuna-do-publico', name: 'Tuna do Publico' },
  { key: 'melhor-serenata', name: 'Melhor Serenata' },
  { key: 'melhor-passacalles', name: 'Melhor Passacalles' },
  { key: 'melhor-pandeireta', name: 'Melhor Pandeireta' },
  { key: 'melhor-instrumental', name: 'Melhor Instrumental' },
  { key: 'melhor-solista', name: 'Melhor Solista' },
  { key: 'melhor-original', name: 'Melhor Tema Original' },
  { key: 'melhor-estandarte', name: 'Melhor Estandarte' },
  { key: 'tuno-mais-tuninho', name: 'Tuno Mais Tuninho' },
  { key: 'tuna-mais-marafada', name: 'Tuna Mais Marafada' },
  { key: 'tuna-mais-real', name: 'Tuna Mais Real' },
  { key: 'tuna-mais-bebedora', name: 'Tuna Mais Bebedora' },
  { key: 'mencao-honrosa', name: 'Mencao Honrosa' },
  { key: 'premio-ibero-americano', name: 'Premio Ibero-Americano' },
  { key: 'premio-participacao', name: 'Premio Participacao' },
  { key: 'premio-tema-especial', name: 'Premio Tema Especial' },
];

// Sample tuna data for demos
const sampleTunas: FrontendTunaWithLogo[] = [
  {
    shortName: 'TEUP',
    fullName: 'Tuna de Engenharia da Universidade do Porto',
    logoUrl: undefined,
    city: 'Porto',
  },
  {
    shortName: 'TUM',
    fullName: 'Tuna Universitaria do Minho',
    logoUrl: undefined,
    city: 'Braga',
  },
  {
    shortName: 'Azeituna',
    fullName: 'Azeituna - Tuna Academica da Universidade de Lisboa',
    logoUrl: undefined,
    city: 'Lisboa',
  },
  {
    shortName: 'TFLUL',
    fullName: 'Tuna da Faculdade de Letras da Universidade de Lisboa',
    logoUrl: undefined,
    city: 'Lisboa',
  },
  {
    shortName: 'Tunadao',
    fullName: 'Tunadao 1998 - Tuna Academica da Universidade do Algarve',
    logoUrl: undefined,
    city: 'Faro',
  },
];
---

<DevLayout title="Components" currentPage="components">
  <nav class="component-nav">
    <a href="#button">Button</a>
    <a href="#card">Card</a>
    <a href="#tuna-avatar">TunaAvatar</a>
    <a href="#tuna-card">TunaCard</a>
    <a href="#award">Award</a>
  </nav>

  <!-- Button -->
  <section id="button" class="component-section">
    <h2>Button</h2>
    <p class="component-path">@components/Button.astro</p>

    <div class="component-group">
      <h3>Variants</h3>
      <div class="component-row">
        <Button variant="primary">Primary</Button>
        <Button variant="secondary">Secondary</Button>
        <Button variant="outline">Outline</Button>
        <Button variant="ghost">Ghost</Button>
      </div>
    </div>

    <div class="component-group">
      <h3>Sizes</h3>
      <div class="component-row">
        <Button size="sm">Small</Button>
        <Button size="md">Medium</Button>
        <Button size="lg">Large</Button>
      </div>
    </div>

    <div class="component-group">
      <h3>States</h3>
      <div class="component-row">
        <Button>Default</Button>
        <Button disabled>Disabled</Button>
      </div>
    </div>

    <div class="component-group">
      <h3>As Link</h3>
      <div class="component-row">
        <Button href="#">Link Button</Button>
        <Button href="#" target="_blank">External Link</Button>
      </div>
    </div>

    <div class="component-group dark-bg">
      <h3>On Dark Background</h3>
      <div class="component-row hero">
        <Button variant="primary">Primary</Button>
        <Button variant="outline">Outline</Button>
      </div>
    </div>
  </section>

  <!-- Card -->
  <section id="card" class="component-section">
    <h2>Card</h2>
    <p class="component-path">@components/Card.astro</p>

    <div class="component-group">
      <h3>Variants</h3>
      <div class="component-grid">
        <Card variant="default">
          <div class="card__content">
            <h4 class="card__title">Default Card</h4>
            <p class="card__description">This is the default card variant with subtle shadow.</p>
          </div>
        </Card>
        <Card variant="elevated">
          <div class="card__content">
            <h4 class="card__title">Elevated Card</h4>
            <p class="card__description">This card has a more prominent shadow.</p>
          </div>
        </Card>
        <Card variant="outlined">
          <div class="card__content">
            <h4 class="card__title">Outlined Card</h4>
            <p class="card__description">This card has a border instead of shadow.</p>
          </div>
        </Card>
      </div>
    </div>

    <div class="component-group">
      <h3>As Link</h3>
      <div class="component-grid">
        <Card href="#" variant="default">
          <div class="card__content">
            <h4 class="card__title">Clickable Card</h4>
            <p class="card__description">Hover to see the lift effect.</p>
          </div>
        </Card>
      </div>
    </div>
  </section>

  <!-- TunaAvatar -->
  <section id="tuna-avatar" class="component-section">
    <h2>TunaAvatar</h2>
    <p class="component-path">@components/tunas/Avatar.astro</p>

    <div class="component-group">
      <h3>Sizes</h3>
      <div class="component-row">
        <TunaAvatar shortName="TEUP" size="sm" />
        <TunaAvatar shortName="TEUP" size="md" />
        <TunaAvatar shortName="TEUP" size="lg" />
        <TunaAvatar shortName="TEUP" size="xl" />
      </div>
      <p class="component-note">sm: 24px | md: 48px | lg: 64px | xl: 96px</p>
    </div>

    <div class="component-group">
      <h3>Shapes</h3>
      <div class="component-row">
        <TunaAvatar shortName="TUM" size="lg" shape="rounded" />
        <TunaAvatar shortName="TUM" size="lg" shape="circle" />
      </div>
      <p class="component-note">rounded (default) | circle</p>
    </div>

    <div class="component-group">
      <h3>Fallback Colors (based on shortName hash)</h3>
      <div class="component-row">
        {
          sampleTunas.map(tuna => (
            <div style="text-align: center;">
              <TunaAvatar shortName={tuna.shortName} size="lg" />
              <p class="component-note" style="margin-top: 4px;">
                {tuna.shortName}
              </p>
            </div>
          ))
        }
      </div>
    </div>

    <div class="component-group">
      <h3>With Logo (simulated)</h3>
      <div class="component-row">
        <TunaAvatar
          shortName="Tunadao"
          logoUrl="https://res.cloudinary.com/demo/image/upload/v1/sample"
          size="lg"
        />
        <TunaAvatar shortName="Tunadao" size="lg" />
      </div>
      <p class="component-note">With logo vs fallback</p>
    </div>
  </section>

  <!-- TunaCard -->
  <section id="tuna-card" class="component-section">
    <h2>TunaCard</h2>
    <p class="component-path">@components/tunas/Card.astro</p>

    <div class="component-group">
      <h3>Display Modes</h3>
      <div class="component-column">
        <div>
          <p class="component-label">both (default)</p>
          <TunaCard tuna={sampleTunas[0]} display="both" />
        </div>
        <div>
          <p class="component-label">short</p>
          <TunaCard tuna={sampleTunas[0]} display="short" />
        </div>
        <div>
          <p class="component-label">full</p>
          <TunaCard tuna={sampleTunas[0]} display="full" />
        </div>
      </div>
    </div>

    <div class="component-group">
      <h3>Sizes</h3>
      <div class="component-column">
        <div>
          <p class="component-label">sm</p>
          <TunaCard tuna={sampleTunas[1]} size="sm" />
        </div>
        <div>
          <p class="component-label">md (default)</p>
          <TunaCard tuna={sampleTunas[1]} size="md" />
        </div>
        <div>
          <p class="component-label">lg</p>
          <TunaCard tuna={sampleTunas[1]} size="lg" />
        </div>
      </div>
    </div>

    <div class="component-group">
      <h3>Multiple Tunas</h3>
      <div class="component-column">
        {sampleTunas.map(tuna => <TunaCard tuna={tuna} size="md" />)}
      </div>
    </div>
  </section>

  <!-- Award -->
  <section id="award" class="component-section">
    <h2>Award</h2>
    <p class="component-path">@components/Award.astro</p>

    <div class="component-group">
      <h3>Variants</h3>
      <div class="component-row">
        <Award awardKey="melhor-tuna">Gold</Award>
        <Award awardKey="tuna-mais-tuna">Special</Award>
        <Award awardKey="tuna-do-publico">Public</Award>
        <Award awardKey="melhor-serenata">Default</Award>
      </div>
    </div>

    <div class="component-group">
      <h3>Sizes</h3>
      <div class="component-row">
        <Award awardKey="melhor-tuna" size="sm">Small (sm)</Award>
        <Award awardKey="melhor-tuna" size="md">Medium (md)</Award>
      </div>
    </div>

    <div class="component-group">
      <h3>All Awards - Size SM</h3>
      <div class="component-row" style="flex-wrap: wrap;">
        {allAwards.map(award => <Award awardKey={award.key} size="sm">{award.name}</Award>)}
      </div>
    </div>

    <div class="component-group">
      <h3>All Awards - Size MD</h3>
      <div class="component-row" style="flex-wrap: wrap;">
        {allAwards.map(award => <Award awardKey={award.key} size="md">{award.name}</Award>)}
      </div>
    </div>

    <div class="component-group">
      <h3>Without Text (Icon Only)</h3>
      <div class="component-row">
        <Award awardKey="melhor-tuna" size="sm" />
        <Award awardKey="segunda-melhor-tuna" size="sm" />
        <Award awardKey="terceira-melhor-tuna" size="sm" />
        <Award awardKey="tuna-mais-tuna" size="sm" />
        <Award awardKey="tuna-do-publico" size="sm" />
        <Award awardKey="melhor-serenata" size="sm" />
        <Award awardKey="mencao-honrosa" size="sm" />
      </div>
    </div>
  </section>

  <style>
    .component-nav {
      display: flex;
      gap: var(--space-4);
      padding: var(--space-3) var(--space-4);
      margin-bottom: var(--space-6);
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-border);
      overflow-x: auto;
    }

    .component-nav a {
      color: var(--color-text-muted);
      text-decoration: none;
      font-size: var(--font-size-sm);
      white-space: nowrap;
      transition: color var(--transition-fast);
    }

    .component-nav a:hover {
      color: var(--color-primary);
    }

    .component-section {
      margin-bottom: var(--space-12);
      scroll-margin-top: 120px;
    }

    .component-section h2 {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      margin-bottom: var(--space-1);
      color: var(--color-text);
    }

    .component-path {
      font-family: monospace;
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      margin-bottom: var(--space-6);
    }

    .component-group {
      margin-bottom: var(--space-6);
      padding: var(--space-4);
      background-color: var(--color-surface);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-border);
    }

    .component-group h3 {
      font-size: var(--font-size-sm);
      font-weight: 600;
      color: var(--color-text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: var(--space-4);
    }

    .component-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: var(--space-3);
    }

    .component-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: var(--space-4);
    }

    .dark-bg {
      background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark));
    }

    .dark-bg h3 {
      color: rgba(255, 255, 255, 0.8);
    }

    .component-column {
      display: flex;
      flex-direction: column;
      gap: var(--space-4);
    }

    .component-note {
      font-size: var(--font-size-xs);
      color: var(--color-text-muted);
      margin-top: var(--space-2);
    }

    .component-label {
      font-size: var(--font-size-xs);
      color: var(--color-text-muted);
      margin-bottom: var(--space-1);
      font-family: monospace;
    }
  </style>
</DevLayout>
