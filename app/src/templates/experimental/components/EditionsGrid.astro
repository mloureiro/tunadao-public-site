---
/**
 * Experimental Template - EditionsGrid
 * Non-standard staggered grid layout
 * Features: masonry-style, creative reveal animations
 */
interface Edition {
  year: number;
  name?: string;
  location?: string;
  poster?: string;
  href?: string;
}

interface Props {
  editions: Edition[];
}

const { editions } = Astro.props;

// Import FestivalCard for use
import FestivalCard from './FestivalCard.astro';
---

<div class="exp-editions-grid">
  {editions.map((edition, index) => (
    <div
      class="exp-editions-grid__item"
      style={`--stagger-index: ${index % 5}`}
    >
      <FestivalCard
        title={edition.name || `Edição ${edition.year}`}
        year={edition.year}
        location={edition.location}
        image={edition.poster}
        href={edition.href}
      />
    </div>
  ))}
</div>

<style>
  .exp-editions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--exp-space-md);
    position: relative;
  }

  .exp-editions-grid__item {
    /* Staggered vertical offset for visual interest */
    transform: translateY(calc(var(--stagger-index) * 20px));
    opacity: 0;
    animation: exp-grid-reveal 0.6s ease-out forwards;
    animation-delay: calc(var(--stagger-index) * 0.1s);
  }

  @keyframes exp-grid-reveal {
    from {
      opacity: 0;
      transform: translateY(calc(var(--stagger-index) * 20px + 30px));
    }
    to {
      opacity: 1;
      transform: translateY(calc(var(--stagger-index) * 20px));
    }
  }

  /* Remove stagger on mobile for cleaner layout */
  @media (max-width: 768px) {
    .exp-editions-grid__item {
      transform: none;
      animation: exp-grid-reveal-mobile 0.4s ease-out forwards;
    }

    @keyframes exp-grid-reveal-mobile {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  }

  /* Large screens: 4 columns */
  @media (min-width: 1200px) {
    .exp-editions-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  /* Extra large: 5 columns */
  @media (min-width: 1600px) {
    .exp-editions-grid {
      grid-template-columns: repeat(5, 1fr);
    }
  }
</style>
