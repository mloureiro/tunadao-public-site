---
/**
 * Mashup Template - Award Component
 * Vintage badge/seal aesthetic with Blue Note heritage feel.
 * Gold for top prizes, navy with cream text for others.
 */

export type AwardVariant = 'default' | 'gold' | 'special' | 'public';

interface Props {
  awardKey: string;
  size?: 'sm' | 'md';
  class?: string;
}

const { awardKey, size = 'sm', class: className = '' } = Astro.props;

const DEFAULT_ICON = '\u2666';

const AWARD_ICONS: Record<string, string> = {
  'melhor-tuna': '\u{1F3C6}',
  'segunda-melhor-tuna': '\u{1F948}',
  'terceira-melhor-tuna': '\u{1F949}',
  'tuna-mais-tuna': '\u{1F3AD}',
  'tuna-do-publico': '\u2764\uFE0F',
  'melhor-serenata': '\u{1F3B5}',
  'melhor-passacalles': '\u{1F57A}',
  'melhor-pandeireta': '\u{1F941}',
  'melhor-instrumental': '\u{1F3B8}',
  'melhor-solista': '\u{1F3A4}',
  'melhor-original': '\u2728',
  'melhor-estandarte': '\u{1F3F4}',
  'premio-participacao': '\u{1F3B6}',
};

function getVariant(key: string): AwardVariant {
  if (key === 'melhor-tuna') return 'gold';
  if (key === 'tuna-mais-tuna') return 'special';
  if (key === 'tuna-do-publico') return 'public';
  return 'default';
}

const variant = getVariant(awardKey);
const icon = AWARD_ICONS[awardKey] || DEFAULT_ICON;
---

<span
  class:list={[
    'mash-award',
    `mash-award--${size}`,
    { [`mash-award--${variant}`]: variant !== 'default' },
    className,
  ]}
>
  <span class="mash-award__icon" aria-hidden="true">{icon}</span>
  <slot />
</span>

<style>
  .mash-award {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    background-color: var(--mash-bg-surface, #1a2230);
    border: 1px solid var(--mash-accent-muted, #9a7b3e);
    border-radius: 2px;
    color: var(--mash-text, #f0ebe3);
    font-family: var(--mash-font-mono, 'Space Mono', monospace);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .mash-award__icon {
    line-height: 1;
    flex-shrink: 0;
  }

  /* Size: sm */
  .mash-award--sm {
    padding: 0.25rem 0.5rem;
    font-size: 0.6875rem;
  }

  .mash-award--sm .mash-award__icon {
    font-size: 0.8125rem;
  }

  /* Size: md */
  .mash-award--md {
    padding: 0.375rem 0.75rem;
    font-size: 0.8125rem;
  }

  .mash-award--md .mash-award__icon {
    font-size: 1.125rem;
  }

  /* Variant: gold - warm gold background, embossed look */
  .mash-award--gold {
    background: linear-gradient(135deg, #c9952e 0%, #e8c878 40%, #d4a853 60%, #b8913e 100%);
    border-color: #b8913e;
    color: #1a1400;
    font-weight: 700;
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }

  /* Variant: special (tuna mais tuna) */
  .mash-award--special {
    background: linear-gradient(135deg, #3d2b6b 0%, #5b4399 50%, #4a3580 100%);
    border-color: #6d28d9;
    color: #f0ebe3;
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(93, 67, 153, 0.4);
  }

  /* Variant: public (tuna do publico) */
  .mash-award--public {
    background: linear-gradient(135deg, #7a1d34 0%, #a62a4a 50%, #8b2240 100%);
    border-color: #be123c;
    color: #f0ebe3;
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(166, 42, 74, 0.4);
  }
</style>
