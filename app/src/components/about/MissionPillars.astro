---
/**
 * MissionPillars - Four-pillar mission section with tinted cards
 * Each pillar has a color-coded icon and translucent background
 */
import { Icon as AstroIcon } from 'astro-icon/components';
import { useTranslations, type Language } from '@i18n/index';
import SectionDivider from '@components/SectionDivider.astro';

interface Props {
  title: string;
  dividerLabel: string;
  lang: Language;
}

const { title, dividerLabel, lang } = Astro.props;
const t = useTranslations(lang);

const pillars = [
  {
    key: 'tradition',
    icon: 'lucide:layers',
    accent: 'var(--color-accent-gold)',
    bg: 'rgba(201, 151, 42, 0.08)',
    border: 'rgba(201, 151, 42, 0.2)',
  },
  {
    key: 'train',
    icon: 'lucide:users',
    accent: 'var(--color-primary)',
    bg: 'rgba(41, 22, 111, 0.08)',
    border: 'rgba(41, 22, 111, 0.2)',
  },
  {
    key: 'represent',
    icon: 'lucide:flag',
    accent: 'var(--color-secondary)',
    bg: 'rgba(191, 0, 41, 0.08)',
    border: 'rgba(191, 0, 41, 0.2)',
  },
  {
    key: 'community',
    icon: 'lucide:heart',
    accent: 'var(--color-gold-dark)',
    bg: 'rgba(155, 113, 32, 0.08)',
    border: 'rgba(155, 113, 32, 0.2)',
  },
] as const;
---

<section class="mission">
  <div class="container">
    <SectionDivider label={dividerLabel} centered />
    <h2 class="mission__title">{title}</h2>

    <div class="mission__grid">
      {pillars.map((pillar) => (
        <article
          class="mission__card"
          style={`background: ${pillar.bg}; border: 1px solid ${pillar.border};`}
        >
          <!-- Icon -->
          <div
            class="mission__icon"
            style={`background: ${pillar.bg}; color: ${pillar.accent}; border: 2px solid ${pillar.border};`}
            aria-hidden="true"
          >
            <AstroIcon name={pillar.icon} size={28} />
          </div>

          <!-- Title -->
          <h3
            class="mission__card-title"
            style={`color: ${pillar.accent};`}
          >
            {t(`about.missionItems.${pillar.key}.title`)}
          </h3>

          <!-- Description -->
          <p class="mission__card-text">
            {t(`about.missionItems.${pillar.key}.description`)}
          </p>

          <!-- Bottom accent line -->
          <div
            class="mission__accent-line"
            style={`background: ${pillar.accent};`}
            aria-hidden="true"
          ></div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .mission {
    padding: var(--space-16) 0;
    background-color: var(--color-background);
  }

  .mission__title {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    text-align: center;
    margin-bottom: var(--space-12);
  }

  @media (min-width: 768px) {
    .mission__title {
      font-size: var(--font-size-4xl);
    }
  }

  .mission__grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-6);
  }

  @media (min-width: 640px) {
    .mission__grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .mission__grid {
      gap: var(--space-8);
    }
  }

  .mission__card {
    position: relative;
    border-radius: var(--radius-2xl);
    padding: var(--space-8);
    transition: all var(--transition-slow);
  }

  .mission__card:hover {
    transform: translateY(-0.25rem);
    box-shadow: var(--shadow-xl);
  }

  .mission__icon {
    width: 3.5rem;
    height: 3.5rem;
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-6);
    transition: transform var(--transition-slow);
  }

  .mission__card:hover .mission__icon {
    transform: scale(1.1);
  }

  .mission__card-title {
    font-family: var(--font-family-heading);
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-bold);
    margin-bottom: var(--space-3);
  }

  .mission__card-text {
    font-size: var(--font-size-base);
    line-height: var(--line-height-relaxed);
    color: var(--color-text-secondary);
  }

  /* Bottom accent line on hover */
  .mission__accent-line {
    position: absolute;
    bottom: 0;
    left: var(--space-8);
    right: var(--space-8);
    height: 2px;
    border-radius: var(--radius-full);
    opacity: 0;
    transition: opacity var(--transition-slow);
  }

  .mission__card:hover .mission__accent-line {
    opacity: 1;
  }
</style>
