---
import type { AwardVariant, AwardKey } from './types';

interface Props {
  awardKey: AwardKey | string;
  name: string;
  winner: string;
  class?: string;
}

const { awardKey, name, winner, class: className = '' } = Astro.props;

const awardIcons: Record<string, string> = {
  'melhor-tuna': 'ğŸ†',
  'segunda-melhor-tuna': 'ğŸ¥ˆ',
  'terceira-melhor-tuna': 'ğŸ¥‰',
  'tuna-do-publico': 'â¤ï¸',
  'tuna-mais-tuna': 'ğŸ­',
  'melhor-serenata': 'ğŸµ',
  'melhor-passacalles': 'ğŸº',
  'melhor-pandeireta': 'ğŸ¥',
  'melhor-instrumental': 'ğŸ¸',
  'melhor-solista': 'ğŸ¤',
  'melhor-original': 'âœ¨',
  'melhor-estandarte': 'ğŸ´',
};

function getVariant(key: string): AwardVariant {
  if (key === 'melhor-tuna') return 'gold';
  if (key === 'segunda-melhor-tuna') return 'silver';
  if (key === 'terceira-melhor-tuna') return 'bronze';
  if (key === 'tuna-do-publico') return 'special';
  return 'default';
}

const variant = getVariant(awardKey);
const icon = awardIcons[awardKey] || '';
---

<div class:list={['award-card', { [`award-card--${variant}`]: variant !== 'default' }, className]}>
  {icon && <span class="award-card__icon">{icon}</span>}
  <span class="award-card__name">{name}</span>
  <span class="award-card__winner">{winner}</span>
</div>

<style>
  .award-card {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
    padding: var(--space-3) var(--space-4);
    background-color: var(--color-background);
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  .award-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }

  .award-card__icon {
    font-size: 1.5rem;
    line-height: 1;
  }

  .award-card__name {
    font-size: var(--text-xs);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.03em;
  }

  .award-card__winner {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--color-text);
  }

  /* Variants */
  .award-card--gold {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-gold) 15%, transparent),
      color-mix(in srgb, var(--color-gold-light) 10%, transparent)
    );
    border-color: var(--color-gold);
    border-left: 4px solid var(--color-gold);
  }

  .award-card--gold .award-card__name {
    color: var(--color-gold-dark);
  }

  :global([data-theme='dark']) .award-card--gold .award-card__name {
    color: var(--color-gold);
  }

  .award-card--silver {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-silver) 15%, transparent),
      color-mix(in srgb, var(--color-silver-light) 10%, transparent)
    );
    border-color: var(--color-silver);
    border-left: 4px solid var(--color-silver);
  }

  .award-card--silver .award-card__name {
    color: var(--color-silver-dark);
  }

  :global([data-theme='dark']) .award-card--silver .award-card__name {
    color: var(--color-silver);
  }

  .award-card--bronze {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-bronze) 15%, transparent),
      color-mix(in srgb, var(--color-bronze-light) 10%, transparent)
    );
    border-color: var(--color-bronze);
    border-left: 4px solid var(--color-bronze);
  }

  .award-card--bronze .award-card__name {
    color: var(--color-bronze-dark);
  }

  :global([data-theme='dark']) .award-card--bronze .award-card__name {
    color: var(--color-bronze);
  }

  .award-card--special {
    background: linear-gradient(
      135deg,
      color-mix(in srgb, var(--color-secondary) 10%, transparent),
      color-mix(in srgb, var(--color-secondary-light) 5%, transparent)
    );
    border-color: var(--color-secondary);
    border-left: 4px solid var(--color-secondary);
  }

  .award-card--special .award-card__name {
    color: var(--color-secondary);
  }
</style>
