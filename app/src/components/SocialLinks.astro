---
import { getSocialLinks } from '@lib/cms';
import { Icon, type IconName } from '@ui/icons';

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;

// Fetch social links from CMS (with fallback)
const cmsSocialLinks = await getSocialLinks();

// Build social links array from CMS data
const socialLinks = [
  cmsSocialLinks.instagram && {
    name: 'Instagram',
    href: cmsSocialLinks.instagram,
    icon: 'instagram' as IconName,
  },
  cmsSocialLinks.facebook && {
    name: 'Facebook',
    href: cmsSocialLinks.facebook,
    icon: 'facebook' as IconName,
  },
  cmsSocialLinks.tiktok && {
    name: 'TikTok',
    href: cmsSocialLinks.tiktok,
    icon: 'tiktok' as IconName,
  },
  cmsSocialLinks.youtube && {
    name: 'YouTube',
    href: cmsSocialLinks.youtube,
    icon: 'youtube' as IconName,
  },
  cmsSocialLinks.spotify && {
    name: 'Spotify',
    href: cmsSocialLinks.spotify,
    icon: 'spotify' as IconName,
  },
].filter(Boolean) as { name: string; href: string; icon: IconName }[];
---

<div class:list={['social-links', className]}>
  {
    socialLinks.map((social) => (
      <a
        href={social.href}
        class="social-links__item"
        target="_blank"
        rel="noopener noreferrer"
        aria-label={social.name}
        title={social.name}
      >
        <Icon name={social.icon} size={20} />
      </a>
    ))
  }
</div>

<style>
  .social-links {
    display: flex;
    gap: var(--space-2);
    margin-top: var(--space-4);
  }

  .social-links__item {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: var(--radius-full);
    background-color: rgba(255, 255, 255, 0.1);
    color: rgba(255, 255, 255, 0.85);
    transition:
      background-color var(--transition-fast),
      color var(--transition-fast),
      transform var(--transition-fast);
  }

  .social-links__item:hover {
    background-color: rgba(255, 255, 255, 0.2);
    color: var(--color-text-inverted);
    transform: translateY(-2px);
  }
</style>
