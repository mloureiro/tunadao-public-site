---
import { Icon as AstroIcon } from 'astro-icon/components';

export type AwardVariant = 'default' | 'gold' | 'special' | 'public';

export type AwardKey = 'melhor-tuna' | 'segunda-melhor-tuna' | 'terceira-melhor-tuna' | 'tuna-mais-tuna' | 'tuna-do-publico' | 'tuno-mais-tuninho' | 'tuna-mais-marafada' | 'tuna-mais-real' | 'tuna-mais-bebedora' | 'melhor-serenata' | 'melhor-passacalles' | 'melhor-pandeireta' | 'melhor-instrumental' | 'melhor-solista' | 'melhor-original' | 'melhor-estandarte' | 'mencao-honrosa' | 'premio-ibero-americano' | 'premio-participacao' | 'premio-tema-especial';

interface Props {
  awardKey: AwardKey | string;
  size?: 'sm' | 'md';
  class?: string;
}

const { awardKey, size = 'sm', class: className = '' } = Astro.props;

const DEFAULT_ICON = 'lucide:award';

const AWARD_ICONS: Record<string, string> = {
  'melhor-tuna':        'lucide:trophy',
  'segunda-melhor-tuna': 'lucide:medal',
  'terceira-melhor-tuna': 'lucide:medal',
  'tuna-mais-tuna':     'lucide:drama',
  'tuna-do-publico':    'lucide:heart',
  'melhor-serenata':    'lucide:music',
  'melhor-passacalles': 'lucide:footprints',
  'melhor-pandeireta':  'lucide:drum',
  'melhor-instrumental': 'lucide:guitar',
  'melhor-solista':     'lucide:mic',
  'melhor-original':    'lucide:sparkles',
  'melhor-estandarte':  'lucide:flag',
  'premio-participacao': 'lucide:music-2',
};

function getVariant(key: string): AwardVariant {
  if (key === 'melhor-tuna') return 'gold';
  if (key === 'tuna-mais-tuna') return 'special';
  if (key === 'tuna-do-publico') return 'public';
  return 'default';
}

const variant = getVariant(awardKey);
const icon = AWARD_ICONS[awardKey] || DEFAULT_ICON;
const iconSize = size === 'sm' ? 14 : 20;
---

<span
  class:list={[
    'award',
    `award--${size}`,
    { [`award--${variant}`]: variant !== 'default' },
    className,
  ]}
>
  <AstroIcon name={icon} size={iconSize} class:list={['award__icon']} aria-hidden="true" />
  <slot />
</span>

<style>
  .award {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    font-weight: 500;
  }

  .award__icon {
    flex-shrink: 0;
    display: flex;
    align-items: center;
  }

  /* Size: sm (inline badge) */
  .award--sm {
    padding: var(--space-1) var(--space-2);
    font-size: var(--font-size-xs);
  }

  /* Size: md (card-like) */
  .award--md {
    padding: var(--space-2) var(--space-3);
    font-size: var(--font-size-sm);
  }

  /* Variant: gold */
  .award--gold {
    background: var(--color-gold);
    border-color: var(--color-gold-dark);
    color: #1a1400;
    font-weight: 600;
    box-shadow:
      0 2px 4px rgb(184 134 11 / 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.4);
  }

  /* Variant: special (tuna mais tuna - purple/violet) */
  .award--special {
    background: linear-gradient(
      135deg,
      #8b5cf6 0%,
      #a78bfa 50%,
      #7c3aed 100%
    );
    border-color: #6d28d9;
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgb(109 40 217 / 0.3);
  }

  /* Variant: public (tuna do publico - red/pink) */
  .award--public {
    background: linear-gradient(
      135deg,
      #f43f5e 0%,
      #fb7185 50%,
      #e11d48 100%
    );
    border-color: #be123c;
    color: #ffffff;
    font-weight: 600;
    box-shadow: 0 2px 4px rgb(190 18 60 / 0.3);
  }
</style>
